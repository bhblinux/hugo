---
title: "docker"
date: 2018-05-29T21:23:09+08:00
categories:
 - docker
tags:
 - docer
 - mac



---
* 安装

#+BEGIN_SRC 
下载 https://download.docker.com/mac/stable/Docker.dmg
#+END_SRC

- 启动 mysql 镜像 

#+BEGIN_SRC 


下载MySQL镜像
docker pull mysql
配置
docker run -d -p 127.0.0.1:3306:3306 --name mysql -v /Users/wangzla/docker/mysql/data:/var/lib/mysql -e MYSQL_ROOT_PASSWORD=123456 mysql:latest
启动mysql
docker start mysql
docker exec -it mysql bash
mysql -u root -p
然后输入密码123456
show databases;
 
远程登录
会报错，要修改密码
ALTER USER 'root'@'%' IDENTIFIED WITH mysql_native_password BY 'root';


#+END_SRC
*  mac 快捷键
#+BEGIN_SRC 
shift+commond +G 进入指定文件夹
Finder 创建多个 commond +t

#+END_SRC
* docker命令
** 镜像操作

#+BEGIN_SRC 
docker images

#+END_SRC
*** 获取一个新的镜像

#+BEGIN_SRC 
docker pull mysql:5.6
#+END_SRC
*** 查找镜像

#+BEGIN_SRC 
docker search httpd
#+END_SRC
*** 更新镜像

#+BEGIN_SRC 
docker run -i -t ubuntu:15.10 /bin/bash
在容器内使用apt-get update 命令更新,然后退出容器,记录容器id=x,
然后通过命令docker commit 来提交容器副本
docker commit -m="has update" x runob/ubuntu:v2
#+END_SRC
*** 构建镜像

使用docker build ,从零开始来创建一个新的镜像,需要创建一
*** 设置镜像标签
使用docker tag 命令为镜像添加一个新的标签
#+BEGIN_SRC 
docker tag xxx runob/centos:dev
#+END_SRC
*** 删除一个镜像

#+BEGIN_SRC 
docker rmi <image id>
#+END_SRC
*** 删除所有镜像

#+BEGIN_SRC 
docker rmi $(docker images -q)
#+END_SRC
** 容器操作
*** 创建容器

#+BEGIN_SRC 
docer run -i -t --name=xxx centos /bin/bash
i: 打开容器的标准输入
t:告诉docker为容器建立一个命令行终端
name:指定容器名称
centos:告诉我们使用什么镜像来启动容器
/bin/bash 告诉docker要在容器里面指定此命令
#+END_SRC
*** 启动容器

#+BEGIN_SRC 
启动一个已经停止的docker run 镜像
docker start xxx  
#+END_SRC
*** 终止容器

#+BEGIN_SRC 
docker stop 退出
docker kill 强制停止
#+END_SRC
*** 删除一个容器

#+BEGIN_SRC 
docker rm /xxx

#+END_SRC

*** 删除所有容器

#+BEGIN_SRC 
docker rm $(docker ps -a -q)
停止所有容器
docker stop $(docker ps -a -q)
#+END_SRC
